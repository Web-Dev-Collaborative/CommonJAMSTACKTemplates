<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Versioning</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Versioning</h1>
    </header>
    <p>
      You can use the <code>version</code> script to cut a new documentation
      version based on the latest content in the <code>docs</code> directory.
      That specific set of documentation will then be preserved and accessible
      even as the documentation in the <code>docs</code> directory changes
      moving forward.
    </p>
    <h2 id="how-to-create-new-versions">How to Create New Versions</h2>
    <p>
      Run the following script to generate a starter versions page listing all
      the site versions:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">yarn</span> examples versions</a></code></pre>
    </div>
    <p>This creates the <code>pages/en/versions.js</code> file.</p>
    <p>
      You can edit this file, later on, to customize how you display the
      versions.
    </p>
    <p>
      Add the following script to your <code>package.json</code> file if it
      doesnâ€™t already exist:
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1">...</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">&quot;scripts&quot;</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="st">&quot;version&quot;</span><span class="op">:</span> <span class="st">&quot;docusaurus-version&quot;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">},</span></a>
<a class="sourceLine" id="cb2-5" title="5">...</a></code></pre>
    </div>
    <p>
      Run the script with a command line argument of the version you wish to
      create. e.g.,
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">yarn</span> run version 1.0.0</a></code></pre>
    </div>
    <p>
      This will preserve all documents currently in the
      <code>docs</code> directory and make them available as documentation for
      version <code>1.0.0</code>.
    </p>
    <p>
      If, for example, you ran the version script with <code>1.0.0</code> as the
      version number, version <code>1.0.0</code> is considered the latest
      release version for your project. The site will display the version number
      next to the title in the header. This version number links to a versions
      page that you created earlier.
    </p>
    <p>
      Documents in the <code>docs</code> directory will be considered part of
      version <code>next</code> and they are available, for example, at the URL
      <code>docs/next/doc1.html</code>. Documents from the latest version use
      the URL <code>docs/doc1.html</code>.
    </p>
    <p>
      Running the script again with <code>yarn run version 2.0.0</code> will
      create a version <code>2.0.0</code>, making version <code>2.0.0</code> the
      most recent set of documentation. Documents from version
      <code>1.0.0</code> will use the URL
      <code>docs/1.0.0/doc1.html</code> while <code>2.0.0</code> will use
      <code>docs/doc1.html</code>.
    </p>
    <p>This table below summarizes Docusaurus versioning at a glance:</p>
    <table>
      <thead>
        <tr class="header">
          <th>Version</th>
          <th>Tag</th>
          <th>URL</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td>1.0.0</td>
          <td>1.0.0</td>
          <td>docs/1.0.0/doc1.html</td>
        </tr>
        <tr class="even">
          <td>1.0.1</td>
          <td>1.0.1</td>
          <td>docs/1.0.1/doc1.html</td>
        </tr>
        <tr class="odd">
          <td>2.0.0</td>
          <td>current</td>
          <td>docs/doc1.html</td>
        </tr>
        <tr class="even">
          <td><code>master</code> branch</td>
          <td>next</td>
          <td>docs/next/doc1.html</td>
        </tr>
      </tbody>
    </table>
    <h2 id="versioning-patterns">Versioning Patterns</h2>
    <p>
      You can create version numbers in whatever format you wish, and a new
      version can be created with any version number as long as it does not
      match an existing version. Version ordering is determined by the order in
      which versions are created, independently of how they are numbered.
    </p>
    <h2 id="storing-files-for-each-version">Storing Files for Each Version</h2>
    <p>
      Versioned documents are placed into
      <code>website/versioned_docs/version-${version}</code>, where
      <code>${version}</code> is the version number you supplied the
      <code>version</code> script.
    </p>
    <p>
      The markdown header for each versioned doc is altered by renaming the id
      front matter field to <code>original_id</code>, then using
      <code>"version-${version}-${original_id}"</code> as the value for the
      actual <code>id</code> field.
    </p>
    <p>
      Versioned sidebars are copied into
      <code>website/versioned_sidebars</code> and are named as
      <code>version-${version}-sidebars.json</code>.
    </p>
    <p>
      A <code>website/versions.json</code> file is created the first time you
      cut a version and is used by Docusaurus to detect what versions exist.
      Each time a new version is added, it gets added to the
      <code>versions.json</code> file.
    </p>
    <p>
      If you wish to change the documentation for a past version, you can access
      the files for that respective version.
    </p>
    <h2 id="fallback-functionality">Fallback Functionality</h2>
    <p>
      Only files in the <code>docs</code> directory and sidebar files that
      differ from those of the latest version will get copied each time a new
      version is specified. If there is no change across versions, Docusaurus
      will use the file from the latest version with that file.
    </p>
    <p>
      For example, a document with the original id <code>doc1</code> exists for
      the latest version, <code>1.0.0</code>, and has the same content as the
      document with the id <code>doc1</code> in the <code>docs</code> directory.
      When a new version <code>2.0.0</code> is created, the file for
      <code>doc1</code> will not be copied into
      <code>versioned_docs/version-2.0.0/</code>. There will still be a page for
      <code>docs/2.0.0/doc1.html</code>, but it will use the file from version
      <code>1.0.0</code>.
    </p>
    <p>
      Because of the way this fallback works, pages that you delete are not
      really deleted from the website unless you tell Docusaurus to skip
      fallback after a certain version. To do this, use the
      <a href="api-site-config.md#deleteddocs-object"
        ><code>deletedDocs</code></a
      >
      option in <code>siteConfig.js</code>.
    </p>
    <h2 id="renaming-existing-versions">Renaming Existing Versions</h2>
    <p>
      To rename an existing version number to something else, first make sure
      the following script is in your <code>package.json</code> file:
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">...</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">&quot;scripts&quot;</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="st">&quot;rename-version&quot;</span><span class="op">:</span> <span class="st">&quot;docusaurus-rename-version&quot;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">},</span></a>
<a class="sourceLine" id="cb4-5" title="5">...</a></code></pre>
    </div>
    <p>
      Run the script with command line arguments of first, the current version
      name, then second, the new version name. e.g.,
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="ex">yarn</span> run rename-version 1.0.0 1.0.1</a></code></pre>
    </div>
    <h2 id="versioning-and-translations">Versioning and Translations</h2>
    <p>
      If you wish to use versioning and translations features, the
      <code>crowdin.yaml</code> file should be set up to upload and download
      versioned documents to and from Crowdin for translation. Translated,
      versioned files will go into the directory
      <code>translated_docs/${language}/version-${version}/</code>. For more
      information, check out the
      <a href="guides-translation.md">translations guide</a>.
    </p>
  </body>
</html>
