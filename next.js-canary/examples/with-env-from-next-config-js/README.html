<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="with-env-from-next.config.js">With env From next.config.js</h1>
    <p>
      This example demonstrates setting parameters that will be used by your
      application and set at build time (not run time). More specifically, what
      that means, is that environmental variables are programmed into the
      special configuration file <code>next.config.js</code> and then returned
      to your react components when the program is built with
      <code>next build</code>.
    </p>
    <p>
      As the build process (<code>next build</code>) is proceeding,
      <code>next.config.js</code> is processed and passed in as a parameter is
      the variable <code>phase</code>. <code>phase</code> can have the values
      <code>PHASE_DEVELOPMENT_SERVER</code> or
      <code>PHASE_PRODUCTION_BUILD</code> (as defined in
      <code>next\constants</code>). Based on the variable <code>phase</code>,
      different environmental variables can be set for use in your react app.
      That is, if you reference <code>process.env.RESTURL_SPEAKERS</code> in
      your react app, whatever is returned by <code>next.config.js</code> as the
      variable <code>env</code>, (or <code>env.RESTURL_SPEAKERS</code>) will be
      accessible in your app as <code>process.env.RESTURL_SPEAKERS</code>.
    </p>
    <p>
      View the docs on
      <a
        href="https://nextjs.org/docs/api-reference/next.config.js/introduction"
        ><code>next.config.js</code></a
      >
      for more information.
    </p>
    <h2 id="deploy-your-own">Deploy your own</h2>
    <p>
      Deploy the example using
      <a
        href="https://vercel.com?utm_source=github&amp;utm_medium=readme&amp;utm_campaign=next-example"
        >Vercel</a
      >:
    </p>
    <p>
      <a
        href="https://vercel.com/new/git/external?repository-url=https://github.com/vercel/next.js/tree/canary/examples/with-env-from-next-config-js&amp;project-name=with-env-from-next-config-js&amp;repository-name=with-env-from-next-config-js"
        ><img src="https://vercel.com/button" alt="Deploy with Vercel"
      /></a>
    </p>
    <h2 id="how-to-use">How to use</h2>
    <p>
      Execute
      <a
        href="https://github.com/vercel/next.js/tree/canary/packages/create-next-app"
        ><code>create-next-app</code></a
      >
      with <a href="https://docs.npmjs.com/cli/init">npm</a> or
      <a href="https://yarnpkg.com/lang/en/docs/cli/create/">Yarn</a> to
      bootstrap the example:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npx</span> create-next-app --example with-env-from-next-config-js with-env-from-next-config-js-app</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># or</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ex">yarn</span> create next-app --example with-env-from-next-config-js with-env-from-next-config-js-app</a></code></pre>
    </div>
    <p>
      Deploy it to the cloud with
      <a
        href="https://vercel.com/new?utm_source=github&amp;utm_medium=readme&amp;utm_campaign=next-example"
        >Vercel</a
      >
      (<a href="https://nextjs.org/docs/deployment">Documentation</a>).
    </p>
    <blockquote>
      <h2 id="special-note">Special note</h2>
      <p>
        <code>next build</code> does a hard coded variable substitution into
        your JavaScript before the final bundle is created. This means that if
        you change your environmental variables outside of your running app,
        such as in windows with <code>set</code> or lunix with
        <code>setenv</code> those changes will not be reflected in your running
        application until a build happens again (with <code>next build</code>).
      </p>
    </blockquote>
    <h2 id="discussion-regarding-this-example">
      Discussion regarding this example
    </h2>
    <p>
      This example is not meant to be a reference standard for how to do
      development, staging and production builds with Next. This is just one
      possible scenario that could be used if you want the following behavior
      while you are doing development.
    </p>
    <ul>
      <li>
        When your run <code>next dev</code> or <code>npm run dev</code>, you
        will always use the environmental variables assigned when
        <code>isDev</code> is true in the example.
      </li>
      <li>
        When you run <code>next build</code> then <code>next start</code>,
        assuming you set externally the environmental variable STAGING to
        anything but 1, you will get the results assuming <code>isProd</code> is
        true.
      </li>
      <li>
        When your run <code>next build</code> or <code>npm run build</code> in
        production, if the environmental variable <code>STAGING</code> is set to
        <code>1</code>, <code>isStaging</code> will be set and you will get
        those values returned.
      </li>
    </ul>
    <p>
      You can read more about this feature in this blog post
      <a href="https://vercel.com/blog/next5-1" target="_blank"
        >Next.js 5.1: Faster Page Resolution, Environment Config and More</a
      >
      (under Environment Config).
    </p>
  </body>
</html>
