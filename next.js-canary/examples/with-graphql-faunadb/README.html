<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="faunadb-graphql-starter-example-the-faunadb-guestbook">
      FaunaDB Graphql Starter Example ‚Äì The FaunaDB Guestbook
    </h1>
    <p>
      This simple Guestbook SPA example shows you how to use
      <a href="https://docs.fauna.com/fauna/current/api/graphql/"
        >FaunaDB‚Äôs GraphQL endpoint</a
      >
      in your Next.js project.
    </p>
    <h2 id="deploy-your-own">Deploy your own</h2>
    <p>
      Deploy the example using
      <a
        href="https://vercel.com?utm_source=github&amp;utm_medium=readme&amp;utm_campaign=next-example"
        >Vercel</a
      >:
    </p>
    <p>
      <a
        href="https://vercel.com/new/git/external?repository-url=https://github.com/vercel/next.js/tree/canary/examples/with-graphql-faunadb&amp;project-name=my-nextjs-guestbook&amp;repository-name=my-nextjs-guestbook&amp;env=NEXT_PUBLIC_FAUNADB_SECRET,NEXT_PUBLIC_FAUNADB_GRAPHQL_ENDPOINT&amp;envDescription=Client%20secret%20and%20GraphQL%20endpoint%20needed%20for%20communicating%20with%20the%20live%20Fauna%20database&amp;demo-title=Next.js%20Fauna%20Guestbook%20App&amp;demo-description=A%20simple%20guestbook%20application%20built%20with%20Next.js%20and%20Fauna&amp;demo-url=https%3A%2F%2Fnextjs-guestbook.vercel.app%2F"
        ><img src="https://vercel.com/button" alt="Deploy with Vercel"
      /></a>
    </p>
    <h2 id="why-faunadb">Why FaunaDB</h2>
    <p>
      By importing a <code>.gql</code> or <code>.graphql</code> schema into
      FaunaDB (<a href="./schema.gql">see our sample schema file</a>), FaunaDB
      will generate required Indexes and GraphQL resolvers for you ‚Äì hands free
      üëê (<a
        href="https://docs.fauna.com/fauna/current/api/graphql/#limitations"
        >some limitations exist</a
      >).
    </p>
    <h2 id="how-to-use">How to use</h2>
    <p>
      You can start with this template
      <a href="#using-create-next-app">using <code>create-next-app</code></a> or
      by <a href="#download-manually">downloading the repository manually</a>.
    </p>
    <p>
      To use a live FaunaDB database, create a database at
      <a href="https://dashboard.fauna.com/">dashboard.fauna.com</a> and
      generate an admin token by going to the <strong>Security</strong> tab on
      the left and then click <strong>New Key</strong>. Give the new key a name
      and select the ‚ÄòAdmin‚Äô Role. Copy the token since the setup script will
      ask for it. Do not use it in the frontend, it has superpowers which you
      don‚Äôt want to give to your users.
    </p>
    <p>The database can then be set up with the delivered setup by running:</p>
    <pre><code>npm run setup
# or
yarn setup</code></pre>
    <p>
      This script will ask for the admin token. Once you provide it with a valid
      token, this is what the script automatically does for you:
    </p>
    <ul>
      <li>
        <strong>Import the GraphQL schema</strong>, by importing a GraphQL
        schema in FaunaDB, FaunaDB automatically sets up collections and indexes
        to support your queries. This is now done for you with this script but
        can also be done from the
        <a href="https://dashboard.fauna.com/">dashboard.fauna.com</a> UI by
        going to the GraphQL tab
      </li>
      <li>
        <strong>Create a role suitable for the Client</strong>, FaunaDB has a
        security system that allows you to define which resources can be
        accessed for a specific token. That‚Äôs how we limit our clients powers,
        feel free to look at the scripts/setup.js script to see how we make
        roles and tokens.
      </li>
      <li>
        <strong>Create a token for that role</strong> which is printed, this is
        the token to be used in the frontend.
      </li>
    </ul>
    <p>
      At the end, a <code>.env.local</code>
      <a href="https://nextjs.org/docs/basic-features/environment-variables"
        >file</a
      >
      will be created for you with the newly generated client token assigned to
      an environment variable.
    </p>
    <p>
      Execute
      <a
        href="https://github.com/vercel/next.js/tree/canary/packages/create-next-app"
        ><code>create-next-app</code></a
      >
      with <a href="https://docs.npmjs.com/cli/init">npm</a> or
      <a href="https://yarnpkg.com/lang/en/docs/cli/create/">Yarn</a> to
      bootstrap the example:
    </p>
    <pre><code>npx create-next-app --example with-graphql-faunadb with-graphql-faunadb-app
# or
yarn create next-app --example with-graphql-faunadb with-graphql-faunadb-app</code></pre>
    <h3 id="run-locally">Run locally</h3>
    <p>Install packages, then run the development server:</p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">npm</span> install</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="ex">npm</span> run dev</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># or</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="ex">yarn</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="ex">yarn</span> dev</a></code></pre>
    </div>
    <p>
      Your app should be up and running on
      <a href="http://localhost:3000">http://localhost:3000</a>!
    </p>
    <h3 id="deploy">Deploy</h3>
    <p>
      <a
        href="https://vercel.com/new/git/external?repository-url=https://github.com/vercel/next.js/tree/canary/examples/with-graphql-faunadb&amp;project-name=my-nextjs-guestbook&amp;repository-name=my-nextjs-guestbook&amp;env=NEXT_PUBLIC_FAUNADB_SECRET,NEXT_PUBLIC_FAUNADB_GRAPHQL_ENDPOINT&amp;envDescription=Client%20secret%20and%20GraphQL%20endpoint%20needed%20for%20communicating%20with%20the%20live%20Fauna%20database&amp;demo-title=Next.js%20Fauna%20Guestbook%20App&amp;demo-description=A%20simple%20guestbook%20application%20built%20with%20Next.js%20and%20Fauna&amp;demo-url=https%3A%2F%2Fnextjs-guestbook.vercel.app%2F"
        ><img src="https://vercel.com/button" alt="Deploy with Vercel"
      /></a>
    </p>
  </body>
</html>
